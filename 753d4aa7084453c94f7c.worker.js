!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(7),o=n(22),u=r(o),s=[],a=null,f=0,c=0;onmessage=function(t){var e=t.data;switch(e.type){case"start":h(e);break;case"step":l()}};var h=function(t){s=[],a=null,c=0,f=t.termination;for(var e=t.guess,n=t.target,r=null,o=0,h=n.length;o<h;o++)r=new i.LumpedModel(n[o].yStart,n[o].yActual,n[o].operatingParams,n[o].option),s.push(r);var l=function(t){for(var e=0,r=(s.length,0),i=n.length;r<i;r++)e+=s[r].objectiveFn(t);return e};a=new u["default"](l,e),postMessage({type:"start",msg:" ------ 拟合开始 ------ \r\n"})},l=function(){a.step(),postMessage({type:"calculating",msg:"第"+ ++c+"次 => 目标函数值："+a.fMin+" \r\n"}),p()},p=function(){if(a.fMin<f){var t={params:[],yCalcu:[],k:[]};t.params=s.length>0?s[0]:[];for(var e=0,n=s.length;e<n;e++)t.yCalcu.push(s[e].getProduct()),t.k.push(s[e].k);postMessage({type:"end",msg:" ------ 拟合完成 ------ \r\n",result:t})}}},function(t,e,n){t.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(13),i=n(18),o=n(20),u=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return u(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){var r,i=[];if(t.length!==e.length)throw"A isn't match E";var o,u=t.length;for(o=0;o<u;o++)r=t[o]*Math.exp(1e3*-e[o]/(v*n)),i.push(r);return i}function o(t,e){var n,r=t.T,i=e.T,o=t.k,u=e.k,s=[],a=[],f=o.length;for(n=0;n<f;n++)a[n]=v*Math.log(u[n]/o[n])/(1/r-1/i);for(n=0;n<f;n++)s[n]=o[n]/Math.exp(-a[n]/v/r);return{A:s,E:a}}function u(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push({name:t[n],key:n,value:""});return e}Object.defineProperty(e,"__esModule",{value:!0}),e.ACTIVE_LUMPS=e.LUMPS=e.UNIVERSAL_GAS_CONSTANT=e.InitCondition=e.calculateAE=e.calculateArrhenius=e.LumpedModel=void 0;var s=n(9),a=r(s),f=n(10),c=r(f),h=n(27),l=r(h),p=function(){function t(e,n,r,i){(0,a["default"])(this,t),r=r||{},i=i||{},this.isFittingK=!!i.isFittingK,this.yStart=e,this.yActual=n,this.temperature=r.temperature,this.pressure=r.pressure,this.residenceTime=r.residenceTime,this.NPercent=r.NPercent,this.catalystOilRatio=r.catalystOilRatio,this.params=[],this.k=[]}return(0,c["default"])(t,[{key:"derives",value:function(t,e){var n=this,r=n.params,o=r.length-3,u=[],s=[],a=[],f=[],c=r.slice(o);n.isFittingK?s=r.slice(0,o):(f=r.slice(0,o/2),a=r.slice(o/2,o),s=i(f,a,n.temperature)),n.k=s,u[0]=-(s[0]+s[1]+s[2]+s[3]+s[4]+s[5]+s[6]+s[7]+s[8])*e[0],u[1]=-(s[9]+s[10]+s[11]+s[12]+s[13]+s[14]+s[15]+s[16]+s[17])*e[1],u[2]=-(s[18]+s[19]+s[20]+s[21]+s[22]+s[23]+s[24]+s[25]+s[26])*e[2],u[3]=s[0]*e[0]+s[9]*e[1]+s[18]*e[2]-(s[27]+s[28]+s[29]+s[30]+s[31]+s[32]+s[33]+s[34])*e[3],u[4]=s[1]*e[0]+s[10]*e[1]+s[19]*e[2]+s[27]*e[3]+s[42]*e[5]-(s[35]+s[36]+s[37]+s[38]+s[39]+s[40]+s[41])*e[4],u[5]=s[2]*e[0]+s[11]*e[1]+s[20]*e[2]+s[28]*e[3]+s[35]*e[4]-(s[42]+s[43]+s[44]+s[45]+s[46]+s[47]+s[48])*e[5],u[6]=s[3]*e[0]+s[12]*e[1]+s[21]*e[2]+s[29]*e[3]+s[36]*e[4]+s[43]*e[5]-(s[49]+s[50]+s[51]+s[52]+s[53])*e[6],u[7]=s[4]*e[0]+s[13]*e[1]+s[22]*e[2]+s[30]*e[3]+s[37]*e[4]+s[44]*e[5]+s[49]*e[6],u[8]=s[5]*e[0]+s[14]*e[1]+s[23]*e[2]+s[31]*e[3]+s[38]*e[4]+s[45]*e[5]+s[50]*e[6],u[9]=s[6]*e[0]+s[15]*e[1]+s[24]*e[2]+s[32]*e[3]+s[39]*e[4]+s[46]*e[5]+s[51]*e[6],u[10]=s[7]*e[0]+s[16]*e[1]+s[25]*e[2]+s[33]*e[3]+s[40]*e[4]+s[47]*e[5]+s[52]*e[6],u[11]=s[8]*e[0]+s[17]*e[1]+s[26]*e[2]+s[34]*e[3]+s[41]*e[4]+s[48]*e[5]+s[53]*e[6];for(var h=1/(1+c[0]*e[1]/100),l=Math.exp(-c[1]*n.residenceTime),p=1/(1+c[2]*n.NPercent/n.catalystOilRatio),d=1/(n.residenceTime*n.catalystOilRatio),y=1/(e[0]/.43+e[1]/.43+e[2]/.43+e[3]/.2+e[4]/.1+e[5]/.1+e[6]/.1+e[7]/.04+e[8]/.04+e[9]/.04+e[10]/.04+e[11]/.018),g=0;g<u.length;g++)u[g]=h*l*p*u[g]*y*n.pressure/(v*n.temperature*d);return u}},{key:"objectiveFn",value:function(t){for(var e=this,n=0,r=t.length;n<r;n++)e.params[n]=Math.abs(t[n]);var n,i=e.yActual,o=e.getProduct(),r=i.length,u=0;for(n=0;n<r;n++)u+=(i[n]-o[n])*(i[n]-o[n]);return u}},{key:"getProduct",value:function(){for(var t=this,e=[],n=0,r=t.yStart.length;n<r;n++)e[n]=t.yStart[n];for(var i=function(e,n){return t.derives(e,n)},o=new l["default"](i,0,e,.01),n=0;n<100;n++)o.step();return o.y}}]),t}(),v=8.3144598,d=["HS","HA","HR","DIESEL","GS","GO","GA","DGAS","LO3","LO4","LPGD","COKE"],y=[[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1]],g=function m(){(0,a["default"])(this,m),this.operational=[{name:"操作温度(K)",key:"temperature",value:""},{name:"操作压力(Pa)",key:"pressure",value:""},{name:"剂油比",key:"catalystOilRatio",value:""},{name:"停留时间(s)",key:"residenceTime",value:""},{name:"碱氮含量",key:"NPercent",value:""}],this.feed=[{name:"HS",key:0,value:""},{name:"HA",key:1,value:""},{name:"HR",key:2,value:""}],this.product=u(d)};e.LumpedModel=p,e.calculateArrhenius=i,e.calculateAE=o,e.InitCondition=g,e.UNIVERSAL_GAS_CONSTANT=v,e.LUMPS=d,e.ACTIVE_LUMPS=y},function(t,e,n){t.exports={"default":n(11),__esModule:!0}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(8),o=r(i);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){n(21);var r=n(3).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(2);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(12);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(2),i=n(5).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(5),i=n(3),o=n(14),u=n(17),s="prototype",a=function(t,e,n){var f,c,h,l=t&a.F,p=t&a.G,v=t&a.S,d=t&a.P,y=t&a.B,g=t&a.W,m=p?i:i[e]||(i[e]={}),x=m[s],_=p?r:v?r[e]:(r[e]||{})[s];p&&(n=e);for(f in n)c=!l&&_&&void 0!==_[f],c&&f in m||(h=c?_[f]:n[f],m[f]=p&&"function"!=typeof _[f]?n[f]:y&&c?o(h,r):g&&_[f]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[s]=t[s],e}(h):d&&"function"==typeof h?o(Function.call,h):h,d&&((m.virtual||(m.virtual={}))[f]=h,t&a.R&&x&&!x[f]&&u(x,f,h)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,n){var r=n(6),i=n(19);t.exports=n(1)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(1)&&!n(4)(function(){return 7!=Object.defineProperty(n(15)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(2);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(16);r(r.S+r.F*!n(1),"Object",{defineProperty:n(6).f})},function(t,e,n){"use strict";var r=n(24),i=n(23),o=function(t,e,n){n=n||{},this.f=t,this.n=e.length,this.xInitGuess=e,this.x=i.clone(e),this.df=n.df||i.getApproximateGradientFunction(this.f),this.maxIterator=n.maxIterator||200,this.err=n.err||1e-6,this.g=this.df(this.x),this.B=i.getIdentityMatrix(this.n),this.p=[],this.stepsize=0,this.fMin=1/0,this.convergence=1/0,this.isConverges=!1,this.iterator=-1};o.prototype={step:function(){var t,e,n=this,i=n.n,o=0;for(t=0;t<i;t++)o+=n.g[t]*n.g[t];if(n.convergence=Math.sqrt(o),isNaN(n.convergence))throw"the norm of the gradient was unconverged";if(n.convergence<n.err)return n.isConverges=!0,n;for(n.iterator++,t=0;t<i;t++)for(n.p[t]=0,e=0;e<i;e++)n.p[t]+=-n.B[t][e]*n.g[e];var u=function(e){var r=[];for(t=0;t<i;t++)r[t]=n.x[t]+e*n.p[t];return n.f(r)};if(n.stepsize=r(u,{guess:0}),isNaN(n.stepsize))throw"can't find approximate stepsize";n.fMin=u(n.stepsize);var s=[];for(t=0;t<i;t++)s[t]=n.stepsize*n.p[t],n.x[t]+=s[t];var a=n.df(n.x),f=[];for(t=0;t<i;t++)f[t]=a[t]-n.g[t];n.g=a;var c=0;for(t=0;t<i;t++)c+=s[t]*f[t];var h=[];for(t=0;t<i;t++)for(h[t]=0,e=0;e<i;e++)h[t]+=n.B[t][e]*f[e];var l=0;for(t=0;t<i;t++)l+=f[t]*h[t];for(l=(c+l)/(c*c),t=0;t<i;t++)for(e=0;e<i;e++)n.B[t][e]+=l*s[t]*s[e]-(h[t]*s[e]+s[t]*h[e])/c;return n},run:function(){for(;;){if(this.isConverges)return this;if(this.iterator>this.maxIterator)throw"Too much iterators";this.step()}}},t.exports=o},function(t,e){"use strict";var n={getApproximateGradientFunction:function(t){return function(e){var n,r,i,o=1e-10,u=[],s=[],a=e.length;for(r=0;r<a;r++){for(i=0;i<a;i++)u[i]=r===i?e[i]+o:e[i];n=t(u)-t(e),s[r]=n/o}return s}},getIdentityMatrix:function(t){var e,n,r=[];for(e=0;e<t;e++){for(r[e]=[],n=0;n<t;n++)r[e][n]=0;r[e][e]=1}return r},clone:function(t){var e,n=[],r=t.length;for(e=0;e<r;e++)n.push(t[e]);return n}};t.exports=n},function(t,e,n){"use strict";var r=n(26),i=n(25);t.exports=function(t,e){e=e||{};var n,o,u=void 0===e.tolerance?1e-8:e.tolerance,s=void 0===e.initialIncrement?1:e.initialIncrement,a=void 0===e.lowerBound?-(1/0):e.lowerBound,f=void 0===e.upperBound?1/0:e.upperBound,c=void 0===e.maxIter?100:e.maxIter;if(isFinite(f)&&isFinite(a))o=[a,f];else if(n=void 0===e.guess?a>-(1/0)?f<1/0?.5*(a+f):a:f<1/0?f:0:e.guess,o=i(t,n,s,a,f,c),isNaN(o[0])||isNaN(o[1]))return NaN;return r(t,o[0],o[1],u,c)}},function(t,e){"use strict";function n(t,e,n,r,i,o){var u,s,a,f,c,h,l;for(f=0,c=e,h=e,a=s=u=t(e);!l&&++f<o;)l=!0,n*=2,s<=a&&(a=s,c=Math.max(r,c-n),s=t(c),l=!1),u<=a&&(a=u,h=Math.min(i,h+n),u=t(h),l=!1),a=Math.min(a,s,u),(s===a&&c===r||u===a&&h===i)&&(l=!0);return f===o?[NaN,NaN]:[c,h]}t.exports=n},function(t,e){"use strict";function n(t,e,n,i,o){for(var u,s,a=0,f=n-r*(n-e),c=e+r*(n-e),h=t(f),l=t(c),p=t(e),v=t(n),d=e,y=n;++a<o&&Math.abs(n-e)>i;)l>h?(n=c,c=f,l=h,f=n-r*(n-e),h=t(f)):(e=f,f=c,h=l,c=e+r*(n-e),l=t(c));return a===o||isNaN(l)||isNaN(h)?NaN:(u=.5*(n+e),s=.5*(h+l),p<s?d:v<s?y:u)}var r=2/(1+Math.sqrt(5));t.exports=n},function(t,e){"use strict";var n=function(t,e,n,r){this.derives=t,this.x=e,this.y=n||[],this.dimension=this.y.length,this.h=r||.01,this._k1,this._k2,this._k3,this._k4};n.prototype={step:function(){var t,e=this.derives,n=this.x,r=this.dimension,i=this.h,o=[];for(this._k1=e(n,this.y),t=0;t<r;t++)o[t]=this.y[t]+.5*i*this._k1[t];for(this._k2=e(n+.5*i,o),t=0;t<r;t++)o[t]=this.y[t]+.5*i*this._k2[t];for(this._k3=e(n+.5*i,o),t=0;t<r;t++)o[t]=this.y[t]+i*this._k3[t];for(this._k4=e(n+i,o),t=0;t<r;t++)this.y[t]+=i/6*(this._k1[t]+2*this._k2[t]+2*this._k3[t]+this._k4[t]);return this.x+=i,this.y},steps:function(t){for(var e=0;e<t;e++)this.step();return this.y},end:function(t){var e=(t-this.x)/this.h;return this.steps(e)}},t.exports=n}]);
//# sourceMappingURL=753d4aa7084453c94f7c.worker.js.map