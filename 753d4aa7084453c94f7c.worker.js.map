{"version":3,"sources":["webpack:///753d4aa7084453c94f7c.worker.js","webpack:///webpack/bootstrap 753d4aa7084453c94f7c","webpack:///./src/calculating.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_descriptors.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_is-object.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_core.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_fails.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_global.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-dp.js","webpack:///./src/LumpedModel.js","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/babel-runtime/helpers/classCallCheck.js","webpack:///./~/babel-runtime/helpers/createClass.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/define-property.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_a-function.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_an-object.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_ctx.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_dom-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_export.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_hide.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_property-desc.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-primitive.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.define-property.js","webpack:///./~/bfgs-algorithm/lib/BFGSAlgorithm.js","webpack:///./~/bfgs-algorithm/lib/MathUtils.js","webpack:///./~/bfgs-algorithm/~/minimize-golden-section-1d/index.js","webpack:///./~/bfgs-algorithm/~/minimize-golden-section-1d/src/bracket-minimum.js","webpack:///./~/bfgs-algorithm/~/minimize-golden-section-1d/src/golden-section-minimize.js","webpack:///./~/runge-kutta-4/lib/RungeKutta4.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_LumpedModel","_bfgsAlgorithm","_bfgsAlgorithm2","lumpedModels","bfgs","termination","iterator","onmessage","message","data","type","start","step","guess","target","lm","i","len","length","LumpedModel","yStart","yActual","operatingParams","option","push","objectiveFn","x","objectiveValue","_i","_len","postMessage","msg","fMin","detect","result","params","yCalcu","k","getProduct","Object","defineProperty","get","a","it","core","version","__e","exec","e","global","window","Math","self","Function","__g","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","P","Attributes","TypeError","value","calculateArrhenius","A","E","T","k0","exp","UNIVERSAL_GAS_CONSTANT","calculateAE","o1","o2","T1","T2","k1","k2","log","setLumps","lumps","name","key","ACTIVE_LUMPS","LUMPS","InitCondition","undefined","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_rungeKutta","_rungeKutta2","options","this","isFittingK","temperature","pressure","residenceTime","NPercent","catalystOilRatio","y","dydx","inactivationFactor","slice","funcA","funcC","funcN","speed","molecularWeights","abs","yCalcul","derives","rk","operational","feed","product","instance","Constructor","_defineProperty","_defineProperty2","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","$Object","desc","isObject","aFunction","fn","that","b","apply","arguments","document","is","createElement","ctx","hide","PROTOTYPE","$export","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","B","IS_WRAP","W","expProto","C","virtual","R","U","createDesc","object","bitmap","val","toString","valueOf","minimize","MathUtils","BFGSAlgorithm","x0","n","xInitGuess","clone","df","getApproximateGradientFunction","maxIterator","err","g","getIdentityMatrix","stepsize","Infinity","convergence","isConverges","j","dimension","sqrt","isNaN","fNext","lamda","xNext","s","_g","_scalarA","_vectorB","_scalarC","run","deltaY","deltaX","xNew","dy","size","matrix","array","res","goldenSectionMinimize","bracketMinimum","bounds","tolerance","dx","initialIncrement","xMin","lowerBound","xMax","upperBound","maxIter","isFinite","NaN","fU","fL","xL","xU","bounded","max","min","tol","xF","fF","x1","phiRatio","x2","f1","f2","f1_0","f2_0","xL_0","xU_0","RungeKutta4","xStart","h","_k1","_k2","_k3","_k4","_y","steps","end","xEnd"],"mappings":"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","file":"753d4aa7084453c94f7c.worker.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _LumpedModel = __webpack_require__(7);\n\t\n\tvar _bfgsAlgorithm = __webpack_require__(22);\n\t\n\tvar _bfgsAlgorithm2 = _interopRequireDefault(_bfgsAlgorithm);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar lumpedModels = [];\n\tvar bfgs = null;\n\tvar termination = 0;\n\tvar iterator = 0;\n\t\n\tonmessage = function onmessage(message) {\n\t    var data = message.data;\n\t\n\t    switch (data.type) {\n\t        case 'start':\n\t            start(data);\n\t            break;\n\t        case 'step':\n\t            step();\n\t            break;\n\t        default:\n\t            break;\n\t    }\n\t};\n\t\n\tvar start = function start(data) {\n\t    lumpedModels = [];\n\t    bfgs = null;\n\t    iterator = 0;\n\t    termination = data.termination;\n\t\n\t    var guess = data.guess;\n\t    var target = data.target;\n\t\n\t    var lm = null;\n\t    for (var i = 0, len = target.length; i < len; i++) {\n\t        lm = new _LumpedModel.LumpedModel(target[i].yStart, target[i].yActual, target[i].operatingParams, target[i].option);\n\t        lumpedModels.push(lm);\n\t    }\n\t\n\t    var objectiveFn = function objectiveFn(x) {\n\t        var objectiveValue = 0;\n\t\n\t        var i = void 0,\n\t            len = lumpedModels.length;\n\t        for (var _i = 0, _len = target.length; _i < _len; _i++) {\n\t            objectiveValue += lumpedModels[_i].objectiveFn(x);\n\t        }\n\t\n\t        return objectiveValue;\n\t    };\n\t\n\t    bfgs = new _bfgsAlgorithm2.default(objectiveFn, guess);\n\t\n\t    postMessage({\n\t        type: 'start',\n\t        msg: ' ------ 拟合开始 ------ \\r\\n'\n\t    });\n\t};\n\t\n\tvar step = function step() {\n\t    bfgs.step();\n\t\n\t    postMessage({\n\t        type: 'calculating',\n\t        msg: '第' + ++iterator + '次 => 目标函数值：' + bfgs.fMin + ' \\r\\n'\n\t    });\n\t\n\t    detect();\n\t};\n\t\n\tvar detect = function detect() {\n\t    if (bfgs.fMin < termination) {\n\t        var result = {\n\t            params: [],\n\t            yCalcu: [],\n\t            k: []\n\t        };\n\t\n\t        result.params = lumpedModels.length > 0 ? lumpedModels[0] : [];\n\t\n\t        for (var i = 0, len = lumpedModels.length; i < len; i++) {\n\t            result.yCalcu.push(lumpedModels[i].getProduct());\n\t            result.k.push(lumpedModels[i].k);\n\t        }\n\t\n\t        postMessage({\n\t            type: 'end',\n\t            msg: ' ------ 拟合完成 ------ \\r\\n',\n\t            result: result\n\t        });\n\t    }\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Thank's IE8 for his funny defineProperty\n\tmodule.exports = !__webpack_require__(4)(function(){\n\t  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  return typeof it === 'object' ? it !== null : typeof it === 'function';\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tvar core = module.exports = {version: '2.4.0'};\n\tif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(exec){\n\t  try {\n\t    return !!exec();\n\t  } catch(e){\n\t    return true;\n\t  }\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n\tvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n\t  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\tif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar anObject       = __webpack_require__(13)\n\t  , IE8_DOM_DEFINE = __webpack_require__(18)\n\t  , toPrimitive    = __webpack_require__(20)\n\t  , dP             = Object.defineProperty;\n\t\n\texports.f = __webpack_require__(1) ? Object.defineProperty : function defineProperty(O, P, Attributes){\n\t  anObject(O);\n\t  P = toPrimitive(P, true);\n\t  anObject(Attributes);\n\t  if(IE8_DOM_DEFINE)try {\n\t    return dP(O, P, Attributes);\n\t  } catch(e){ /* empty */ }\n\t  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n\t  if('value' in Attributes)O[P] = Attributes.value;\n\t  return O;\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.ACTIVE_LUMPS = exports.LUMPS = exports.UNIVERSAL_GAS_CONSTANT = exports.InitCondition = exports.calculateAE = exports.calculateArrhenius = exports.LumpedModel = undefined;\n\t\n\tvar _classCallCheck2 = __webpack_require__(9);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(10);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _rungeKutta = __webpack_require__(27);\n\t\n\tvar _rungeKutta2 = _interopRequireDefault(_rungeKutta);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar LumpedModel = function () {\n\t    function LumpedModel(yStart, yActual, operatingParams, options) {\n\t        (0, _classCallCheck3.default)(this, LumpedModel);\n\t\n\t        operatingParams = operatingParams || {};\n\t        options = options || {};\n\t\n\t        this.isFittingK = !!options.isFittingK;\n\t\n\t        this.yStart = yStart;\n\t\n\t        this.yActual = yActual;\n\t\n\t        this.temperature = operatingParams.temperature;\n\t\n\t        this.pressure = operatingParams.pressure;\n\t\n\t        this.residenceTime = operatingParams.residenceTime;\n\t\n\t        this.NPercent = operatingParams.NPercent;\n\t\n\t        this.catalystOilRatio = operatingParams.catalystOilRatio;\n\t\n\t        this.params = [];\n\t\n\t        this.k = [];\n\t    }\n\t\n\t    (0, _createClass3.default)(LumpedModel, [{\n\t        key: 'derives',\n\t        value: function derives(x, y) {\n\t            var self = this;\n\t            var params = self.params;\n\t\n\t            var len = params.length - 3;\n\t\n\t            var dydx = [];\n\t\n\t            var M = [];\n\t\n\t            var k = [];\n\t\n\t            var E = [];\n\t\n\t            var A = [];\n\t\n\t            var inactivationFactor = params.slice(len);\n\t\n\t            if (self.isFittingK) {\n\t                k = params.slice(0, len);\n\t            } else {\n\t                A = params.slice(0, len / 2);\n\t                E = params.slice(len / 2, len);\n\t                k = calculateArrhenius(A, E, self.temperature);\n\t            }\n\t\n\t            self.k = k;\n\t\n\t            dydx[0] = -(k[0] + k[1] + k[2] + k[3] + k[4] + k[5] + k[6] + k[7] + k[8]) * y[0];\n\t\n\t            dydx[1] = -(k[9] + k[10] + k[11] + k[12] + k[13] + k[14] + k[15] + k[16] + k[17]) * y[1];\n\t\n\t            dydx[2] = -(k[18] + k[19] + k[20] + k[21] + k[22] + k[23] + k[24] + k[25] + k[26]) * y[2];\n\t\n\t            dydx[3] = k[0] * y[0] + k[9] * y[1] + k[18] * y[2] - (k[27] + k[28] + k[29] + k[30] + k[31] + k[32] + k[33] + k[34]) * y[3];\n\t\n\t            dydx[4] = k[1] * y[0] + k[10] * y[1] + k[19] * y[2] + k[27] * y[3] + k[42] * y[5] - (k[35] + k[36] + k[37] + k[38] + k[39] + k[40] + k[41]) * y[4];\n\t\n\t            dydx[5] = k[2] * y[0] + k[11] * y[1] + k[20] * y[2] + k[28] * y[3] + k[35] * y[4] - (k[42] + k[43] + k[44] + k[45] + k[46] + k[47] + k[48]) * y[5];\n\t\n\t            dydx[6] = k[3] * y[0] + k[12] * y[1] + k[21] * y[2] + k[29] * y[3] + k[36] * y[4] + k[43] * y[5] - (k[49] + k[50] + k[51] + k[52] + k[53]) * y[6];\n\t\n\t            dydx[7] = k[4] * y[0] + k[13] * y[1] + k[22] * y[2] + k[30] * y[3] + k[37] * y[4] + k[44] * y[5] + k[49] * y[6];\n\t\n\t            dydx[8] = k[5] * y[0] + k[14] * y[1] + k[23] * y[2] + k[31] * y[3] + k[38] * y[4] + k[45] * y[5] + k[50] * y[6];\n\t\n\t            dydx[9] = k[6] * y[0] + k[15] * y[1] + k[24] * y[2] + k[32] * y[3] + k[39] * y[4] + k[46] * y[5] + k[51] * y[6];\n\t\n\t            dydx[10] = k[7] * y[0] + k[16] * y[1] + k[25] * y[2] + k[33] * y[3] + k[40] * y[4] + k[47] * y[5] + k[52] * y[6];\n\t\n\t            dydx[11] = k[8] * y[0] + k[17] * y[1] + k[26] * y[2] + k[34] * y[3] + k[41] * y[4] + k[48] * y[5] + k[53] * y[6];\n\t\n\t            var funcA = 1 / (1 + inactivationFactor[0] * y[1] / 100);\n\t            var funcC = Math.exp(-inactivationFactor[1] * self.residenceTime);\n\t            var funcN = 1 / (1 + inactivationFactor[2] * self.NPercent / self.catalystOilRatio);\n\t\n\t            var speed = 1 / (self.residenceTime * self.catalystOilRatio);\n\t\n\t            var molecularWeights = 1 / (y[0] / 0.430 + y[1] / 0.430 + y[2] / 0.430 + y[3] / 0.200 + y[4] / 0.100 + y[5] / 0.100 + y[6] / 0.100 + y[7] / 0.040 + y[8] / 0.040 + y[9] / 0.040 + y[10] / 0.040 + y[11] / 0.018);\n\t\n\t            for (var i = 0; i < dydx.length; i++) {\n\t                dydx[i] = funcA * funcC * funcN * dydx[i] * molecularWeights * self.pressure / (UNIVERSAL_GAS_CONSTANT * self.temperature * speed);\n\t            }\n\t\n\t            return dydx;\n\t        }\n\t    }, {\n\t        key: 'objectiveFn',\n\t        value: function objectiveFn(x) {\n\t            var self = this;\n\t\n\t            for (var i = 0, len = x.length; i < len; i++) {\n\t                self.params[i] = Math.abs(x[i]);\n\t            }\n\t\n\t            var yActual = self.yActual;\n\t\n\t            var yCalcul = self.getProduct();\n\t\n\t            var i,\n\t                len = yActual.length,\n\t                objectiveValue = 0;\n\t            for (i = 0; i < len; i++) {\n\t                objectiveValue += (yActual[i] - yCalcul[i]) * (yActual[i] - yCalcul[i]);\n\t            }\n\t\n\t            return objectiveValue;\n\t        }\n\t    }, {\n\t        key: 'getProduct',\n\t        value: function getProduct() {\n\t            var self = this;\n\t\n\t            var yStart = [];\n\t            for (var i = 0, len = self.yStart.length; i < len; i++) {\n\t                yStart[i] = self.yStart[i];\n\t            }\n\t\n\t            var derives = function derives(x, y) {\n\t                return self.derives(x, y);\n\t            };\n\t\n\t            var rk = new _rungeKutta2.default(derives, 0, yStart, 0.01);\n\t\n\t            for (var i = 0; i < 100; i++) {\n\t                rk.step();\n\t            }\n\t\n\t            return rk.y;\n\t        }\n\t    }]);\n\t    return LumpedModel;\n\t}();\n\t\n\tfunction calculateArrhenius(A, E, T) {\n\t    var k0,\n\t        k = [];\n\t\n\t    if (A.length !== E.length) throw 'A isn\\'t match E';\n\t\n\t    var i,\n\t        len = A.length;\n\t    for (i = 0; i < len; i++) {\n\t        k0 = A[i] * Math.exp(-E[i] * 1000 / (UNIVERSAL_GAS_CONSTANT * T));\n\t        k.push(k0);\n\t    }\n\t\n\t    return k;\n\t}\n\t\n\tfunction calculateAE(o1, o2) {\n\t    var T1 = o1.T,\n\t        T2 = o2.T,\n\t        k1 = o1.k,\n\t        k2 = o2.k;\n\t\n\t    var A = [],\n\t        E = [];\n\t\n\t    var i,\n\t        len = k1.length;\n\t    for (i = 0; i < len; i++) {\n\t        E[i] = UNIVERSAL_GAS_CONSTANT * Math.log(k2[i] / k1[i]) / (1 / T1 - 1 / T2);\n\t    }\n\t\n\t    for (i = 0; i < len; i++) {\n\t        A[i] = k1[i] / Math.exp(-E[i] / UNIVERSAL_GAS_CONSTANT / T1);\n\t    }\n\t\n\t    return {\n\t        A: A,\n\t        E: E\n\t    };\n\t}\n\t\n\tfunction setLumps(lumps) {\n\t    var result = [];\n\t    for (var i = 0, len = lumps.length; i < len; i++) {\n\t        result.push({\n\t            name: lumps[i],\n\t            key: i,\n\t            value: ''\n\t        });\n\t    }\n\t    return result;\n\t}\n\t\n\tvar UNIVERSAL_GAS_CONSTANT = 8.3144598;\n\t\n\tvar LUMPS = ['HS', 'HA', 'HR', 'DIESEL', 'GS', 'GO', 'GA', 'DGAS', 'LO3', 'LO4', 'LPGD', 'COKE'];\n\t\n\tvar ACTIVE_LUMPS = [[false, false, false, false, false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false, false, false, false, false], [false, false, false, false, false, false, false, false, false, false, false, false], [true, true, true, false, false, false, false, false, false, false, false, false], [true, true, true, true, false, true, false, false, false, false, false, false], [true, true, true, true, true, false, false, false, false, false, false, false], [true, true, true, true, true, true, false, false, false, false, false, false], [true, true, true, true, true, true, true, false, false, false, false, false], [true, true, true, true, true, true, true, false, false, false, false, false], [true, true, true, true, true, true, true, false, false, false, false, false], [true, true, true, true, true, true, true, false, false, false, false, false], [true, true, true, true, true, true, true, false, false, false, false, false]];\n\t\n\tvar InitCondition = function InitCondition() {\n\t    (0, _classCallCheck3.default)(this, InitCondition);\n\t\n\t    this.operational = [{ name: '操作温度(K)', key: 'temperature', value: '' }, { name: '操作压力(Pa)', key: 'pressure', value: '' }, { name: '剂油比', key: 'catalystOilRatio', value: '' }, { name: '停留时间(s)', key: 'residenceTime', value: '' }, { name: '碱氮含量', key: 'NPercent', value: '' }];\n\t    this.feed = [{ name: 'HS', key: 0, value: '' }, { name: 'HA', key: 1, value: '' }, { name: 'HR', key: 2, value: '' }];\n\t    this.product = setLumps(LUMPS);\n\t};\n\t\n\texports.LumpedModel = LumpedModel;\n\texports.calculateArrhenius = calculateArrhenius;\n\texports.calculateAE = calculateAE;\n\texports.InitCondition = InitCondition;\n\texports.UNIVERSAL_GAS_CONSTANT = UNIVERSAL_GAS_CONSTANT;\n\texports.LUMPS = LUMPS;\n\texports.ACTIVE_LUMPS = ACTIVE_LUMPS;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = { \"default\": __webpack_require__(11), __esModule: true };\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\texports.default = function (instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError(\"Cannot call a class as a function\");\n\t  }\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _defineProperty = __webpack_require__(8);\n\t\n\tvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function () {\n\t  function defineProperties(target, props) {\n\t    for (var i = 0; i < props.length; i++) {\n\t      var descriptor = props[i];\n\t      descriptor.enumerable = descriptor.enumerable || false;\n\t      descriptor.configurable = true;\n\t      if (\"value\" in descriptor) descriptor.writable = true;\n\t      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n\t    }\n\t  }\n\t\n\t  return function (Constructor, protoProps, staticProps) {\n\t    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t    if (staticProps) defineProperties(Constructor, staticProps);\n\t    return Constructor;\n\t  };\n\t}();\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(21);\n\tvar $Object = __webpack_require__(3).Object;\n\tmodule.exports = function defineProperty(it, key, desc){\n\t  return $Object.defineProperty(it, key, desc);\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(it){\n\t  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n\t  return it;\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(2);\n\tmodule.exports = function(it){\n\t  if(!isObject(it))throw TypeError(it + ' is not an object!');\n\t  return it;\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// optional / simple context binding\n\tvar aFunction = __webpack_require__(12);\n\tmodule.exports = function(fn, that, length){\n\t  aFunction(fn);\n\t  if(that === undefined)return fn;\n\t  switch(length){\n\t    case 1: return function(a){\n\t      return fn.call(that, a);\n\t    };\n\t    case 2: return function(a, b){\n\t      return fn.call(that, a, b);\n\t    };\n\t    case 3: return function(a, b, c){\n\t      return fn.call(that, a, b, c);\n\t    };\n\t  }\n\t  return function(/* ...args */){\n\t    return fn.apply(that, arguments);\n\t  };\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar isObject = __webpack_require__(2)\n\t  , document = __webpack_require__(5).document\n\t  // in old IE typeof document.createElement is 'object'\n\t  , is = isObject(document) && isObject(document.createElement);\n\tmodule.exports = function(it){\n\t  return is ? document.createElement(it) : {};\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar global    = __webpack_require__(5)\n\t  , core      = __webpack_require__(3)\n\t  , ctx       = __webpack_require__(14)\n\t  , hide      = __webpack_require__(17)\n\t  , PROTOTYPE = 'prototype';\n\t\n\tvar $export = function(type, name, source){\n\t  var IS_FORCED = type & $export.F\n\t    , IS_GLOBAL = type & $export.G\n\t    , IS_STATIC = type & $export.S\n\t    , IS_PROTO  = type & $export.P\n\t    , IS_BIND   = type & $export.B\n\t    , IS_WRAP   = type & $export.W\n\t    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n\t    , expProto  = exports[PROTOTYPE]\n\t    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n\t    , key, own, out;\n\t  if(IS_GLOBAL)source = name;\n\t  for(key in source){\n\t    // contains in native\n\t    own = !IS_FORCED && target && target[key] !== undefined;\n\t    if(own && key in exports)continue;\n\t    // export native or passed\n\t    out = own ? target[key] : source[key];\n\t    // prevent global pollution for namespaces\n\t    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n\t    // bind timers to global for call from export context\n\t    : IS_BIND && own ? ctx(out, global)\n\t    // wrap global constructors for prevent change them in library\n\t    : IS_WRAP && target[key] == out ? (function(C){\n\t      var F = function(a, b, c){\n\t        if(this instanceof C){\n\t          switch(arguments.length){\n\t            case 0: return new C;\n\t            case 1: return new C(a);\n\t            case 2: return new C(a, b);\n\t          } return new C(a, b, c);\n\t        } return C.apply(this, arguments);\n\t      };\n\t      F[PROTOTYPE] = C[PROTOTYPE];\n\t      return F;\n\t    // make static versions for prototype methods\n\t    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n\t    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n\t    if(IS_PROTO){\n\t      (exports.virtual || (exports.virtual = {}))[key] = out;\n\t      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n\t      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n\t    }\n\t  }\n\t};\n\t// type bitmap\n\t$export.F = 1;   // forced\n\t$export.G = 2;   // global\n\t$export.S = 4;   // static\n\t$export.P = 8;   // proto\n\t$export.B = 16;  // bind\n\t$export.W = 32;  // wrap\n\t$export.U = 64;  // safe\n\t$export.R = 128; // real proto method for `library` \n\tmodule.exports = $export;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar dP         = __webpack_require__(6)\n\t  , createDesc = __webpack_require__(19);\n\tmodule.exports = __webpack_require__(1) ? function(object, key, value){\n\t  return dP.f(object, key, createDesc(1, value));\n\t} : function(object, key, value){\n\t  object[key] = value;\n\t  return object;\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = !__webpack_require__(1) && !__webpack_require__(4)(function(){\n\t  return Object.defineProperty(__webpack_require__(15)('div'), 'a', {get: function(){ return 7; }}).a != 7;\n\t});\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(bitmap, value){\n\t  return {\n\t    enumerable  : !(bitmap & 1),\n\t    configurable: !(bitmap & 2),\n\t    writable    : !(bitmap & 4),\n\t    value       : value\n\t  };\n\t};\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// 7.1.1 ToPrimitive(input [, PreferredType])\n\tvar isObject = __webpack_require__(2);\n\t// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n\t// and the second argument - flag - preferred type is a string\n\tmodule.exports = function(it, S){\n\t  if(!isObject(it))return it;\n\t  var fn, val;\n\t  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n\t  throw TypeError(\"Can't convert object to primitive value\");\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $export = __webpack_require__(16);\n\t// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n\t$export($export.S + $export.F * !__webpack_require__(1), 'Object', {defineProperty: __webpack_require__(6).f});\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict'\n\t\n\tvar minimize = __webpack_require__(24)\n\t\n\tvar MathUtils = __webpack_require__(23)\n\t\n\t/**\n\t * [BFGSAlgorithm description]\n\t */\n\tvar BFGSAlgorithm = function(f, x0, options) {\n\t    options = options || {}\n\t\n\t    this.f = f\n\t    this.n = x0.length\n\t    // cache the init guess\n\t    this.xInitGuess = x0\n\t    this.x = MathUtils.clone(x0)\n\t\n\t    this.df = options.df || MathUtils.getApproximateGradientFunction(this.f)\n\t    this.maxIterator = options.maxIterator || 200\n\t    this.err = options.err || 1E-6\n\t\n\t    // the gradient of the function evaluated at x[k]: g[k]  (x[0] = x0)\n\t    this.g = this.df(this.x)\n\t\n\t    // the inverse of approximate Hessian matrix: B[k]  (B[0] = I)\n\t    this.B = MathUtils.getIdentityMatrix(this.n)\n\t\n\t    // direction: p[k]\n\t    this.p = []\n\t\n\t    this.stepsize = 0\n\t    this.fMin = Infinity\n\t    this.convergence = Infinity\n\t    this.isConverges = false\n\t\n\t    this.iterator = -1\n\t}\n\t\n\tBFGSAlgorithm.prototype = {\n\t    step: function() {\n\t        var self = this\n\t        var dimension = self.n\n\t        var i, j\n\t\n\t        ////////////////////////////////////////////////////////////////\n\t        // 0. Convergence is checked by observing the norm of the gradient\n\t        // \n\t        var convergence = 0\n\t        for (i = 0; i < dimension; i++) {\n\t            convergence += self.g[i] * self.g[i]\n\t        }\n\t        self.convergence = Math.sqrt(convergence)\n\t\n\t        if (isNaN(self.convergence)) {\n\t            throw 'the norm of the gradient was unconverged'\n\t        }\n\t\n\t        if (self.convergence < self.err) {\n\t            self.isConverges = true\n\t            return self\n\t        }\n\t\n\t        self.iterator++\n\t        ////////////////////////////////////////////////////////////////\n\t        // 1. obtain a direction pk by solving: P[k] = - B[k] * ▽f(x[k])\n\t        // 搜索方向 done: p \n\t        for (i = 0; i < dimension; i++) {\n\t            self.p[i] = 0\n\t            for (j = 0; j < dimension; j++) {\n\t                self.p[i] += -self.B[i][j] * self.g[j]\n\t            }\n\t        }\n\t\n\t        ////////////////////////////////////////////////////////////////\n\t        // 2. lineSearch: min f(x + lamda * p)\n\t        // 搜索步长 done: stepsize\n\t        var fNext = function(lamda) {\n\t            var xNext = []\n\t            for (i = 0; i < dimension; i++) {\n\t                xNext[i] = self.x[i] + lamda * self.p[i]\n\t            }\n\t            return self.f(xNext)\n\t        }\n\t\n\t        self.stepsize = minimize(fNext, { guess: 0 })\n\t\n\t        if (isNaN(self.stepsize)) {\n\t            throw 'can\\'t find approximate stepsize'\n\t        }\n\t        \n\t        self.fMin = fNext(self.stepsize)\n\t        ////////////////////////////////////////////////////////////////\n\t        // 3. update: x[k + 1] = x[k] + stepsize * p[k],  s[k] = stepsize * p[k]\n\t        // 求取heessian矩阵中间值 s done: s = stepsize * p\n\t        // 下一次迭代点 done: s = stepsize * p\n\t        var s = []\n\t        for (i = 0; i < dimension; i++) {\n\t            s[i] = self.stepsize * self.p[i]\n\t            self.x[i] += s[i]\n\t        }\n\t\n\t        ////////////////////////////////////////////////////////////////\n\t        // 4. next gradient: ▽f(x[k + 1]), y[k] = g[k + 1] - g[k]\n\t        // 求取hessian矩阵中间值 y done: y = df(x[k + 1]) - df(x[k])\n\t        var _g = self.df(self.x)\n\t        var y = []\n\t        for (i = 0; i < dimension; i++) {\n\t            y[i] = _g[i] - self.g[i]\n\t        }\n\t        self.g = _g\n\t\n\t        ////////////////////////////////////////////////////////////////\n\t        // 5. approximate hessian matrix\n\t        // (T) => transposition\n\t        \n\t        // 5.1 let _scalarA = s(T) * y\n\t        var _scalarA = 0\n\t        for (i = 0; i < dimension; i++) {\n\t            _scalarA += s[i] * y[i]\n\t        }\n\t\n\t        // 5.2 let _vectorB = B * y\n\t        var _vectorB = []\n\t        for (i = 0; i < dimension; i++) {\n\t            _vectorB[i] = 0\n\t            for (j = 0; j < dimension; j++) {\n\t                _vectorB[i] += self.B[i][j] * y[j]\n\t            }\n\t        }\n\t\n\t        // 5.3 let _scalarC = (s(T) * y + y(T) * B * y) / (s(T) * y)2\n\t        //                  = (_scalarA + y(T) * _vectorB) / (_scalarA * _scalarA)\n\t        var _scalarC = 0\n\t        for (i = 0; i < dimension; i++) {\n\t            _scalarC += y[i] * _vectorB[i]\n\t        }\n\t        _scalarC = (_scalarA + _scalarC) / (_scalarA * _scalarA)\n\t\n\t        for (i = 0; i < dimension; i++) {\n\t            for (j = 0; j < dimension; j++) {\n\t                self.B[i][j] += _scalarC * s[i] * s[j] - (_vectorB[i] * s[j] + s[i] * _vectorB[j]) / _scalarA\n\t            }\n\t        }\n\t\n\t        return self\n\t    },\n\t\n\t    run: function() {\n\t        while (true) {\n\t            if (this.isConverges) {\n\t                return this\n\t            }\n\t\n\t            if (this.iterator > this.maxIterator) {\n\t                throw 'Too much iterators'\n\t            }\n\t\n\t            this.step()\n\t        }\n\t    }\n\t}\n\t\n\tmodule.exports = BFGSAlgorithm\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\t'use strict'\n\t\n\tvar MathUtils = {\n\t    getApproximateGradientFunction: function(f) {\n\t        return function(x) {\n\t            var deltaX = 1E-10\n\t            var deltaY\n\t            var xNew = [], dy = []\n\t\n\t            var i, j, n = x.length\n\t            for (i = 0; i < n; i++) {\n\t                for (j = 0; j < n; j++) {\n\t                    xNew[j] = (i === j) ? (x[j] + deltaX) : x[j]\n\t                }\n\t\n\t                deltaY = f(xNew) - f(x)\n\t\n\t                dy[i] = deltaY / deltaX\n\t            }\n\t\n\t            return dy\n\t        }\n\t    },\n\t\n\t    /**\n\t     * generate Identity Matrix\n\t     * @param  {Number} size the size of identity matrix\n\t     * @return {Array}  Identity Matrix \n\t     */\n\t    getIdentityMatrix: function(size) {\n\t        var i, j\n\t        var matrix = []\n\t\n\t        for (i = 0; i < size; i++) {\n\t            matrix[i] = []\n\t            for (j = 0; j < size; j++) {\n\t                matrix[i][j] = 0\n\t            }\n\t            matrix[i][i] = 1\n\t        }\n\t\n\t        return matrix\n\t    },\n\t\n\t    clone: function(array) {\n\t        var res = []\n\t        var i, len = array.length\n\t\n\t        for (i = 0; i < len; i++) {\n\t            res.push(array[i])\n\t        }\n\t\n\t        return res\n\t    }\n\t}\n\t\n\tmodule.exports = MathUtils\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar goldenSectionMinimize = __webpack_require__(26);\n\tvar bracketMinimum = __webpack_require__(25);\n\t\n\tmodule.exports = function minimize (f, options) {\n\t  options = options || {};\n\t  var x0, bounds;\n\t  var tolerance = options.tolerance === undefined ? 1e-8 : options.tolerance;\n\t  var dx = options.initialIncrement === undefined ? 1 : options.initialIncrement;\n\t  var xMin = options.lowerBound === undefined ? -Infinity : options.lowerBound;\n\t  var xMax = options.upperBound === undefined ? Infinity : options.upperBound;\n\t  var maxIter = options.maxIter === undefined ? 100 : options.maxIter;\n\t\n\t  if (isFinite(xMax) && isFinite(xMin)) {\n\t    bounds = [xMin, xMax];\n\t  } else {\n\t    // Construct the best guess we can:\n\t    if (options.guess === undefined) {\n\t      if (xMin > -Infinity) {\n\t        x0 = xMax < Infinity ? 0.5 * (xMin + xMax) : xMin;\n\t      } else {\n\t        x0 = xMax < Infinity ? xMax : 0;\n\t      }\n\t    } else {\n\t      x0 = options.guess;\n\t    }\n\t\n\t    bounds = bracketMinimum(f, x0, dx, xMin, xMax, maxIter);\n\t\n\t    if (isNaN(bounds[0]) || isNaN(bounds[1])) {\n\t      return NaN;\n\t    }\n\t  }\n\t\n\t  return goldenSectionMinimize(f, bounds[0], bounds[1], tolerance, maxIter);\n\t};\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = bracketMinimum;\n\t\n\tfunction bracketMinimum (f, x0, dx, xMin, xMax, maxIter) {\n\t  // If either size is unbounded (=infinite), Expand the guess\n\t  // range until we either bracket a minimum or until we reach the bounds:\n\t  var fU, fL, fMin, n, xL, xU, bounded;\n\t  n = 0;\n\t  xL = x0;\n\t  xU = x0;\n\t  fMin = fL = fU = f(x0);\n\t  while (!bounded && ++n < maxIter) {\n\t    bounded = true;\n\t    // Increase the increment:\n\t    dx *= 2;\n\t    if (fL <= fMin) {\n\t      fMin = fL;\n\t      xL = Math.max(xMin, xL - dx);\n\t      fL = f(xL);\n\t      bounded = false;\n\t    }\n\t    if (fU <= fMin) {\n\t      fMin = fU;\n\t      xU = Math.min(xMax, xU + dx);\n\t      fU = f(xU);\n\t      bounded = false;\n\t    }\n\t\n\t    // Track the smallest value seen so far:\n\t    fMin = Math.min(fMin, fL, fU);\n\t\n\t    // If either of these is the case, then the function appears\n\t    // to be minimized against one of the bounds, so although we\n\t    // haven't bracketed a minimum, we'll considere the procedure\n\t    // complete because we appear to have bracketed a minimum\n\t    // against a bound:\n\t    if ((fL === fMin && xL === xMin) || (fU === fMin && xU === xMax)) {\n\t      bounded = true;\n\t    }\n\t  }\n\t\n\t  if (n === maxIter) {\n\t    return [NaN, NaN];\n\t  } else {\n\t    return [xL, xU];\n\t  }\n\t}\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar phiRatio = 2 / (1 + Math.sqrt(5));\n\t\n\tmodule.exports = goldenSectionMinimize;\n\t\n\tfunction goldenSectionMinimize (f, xL, xU, tol, maxIter) {\n\t  var xF, fF;\n\t  var n = 0;\n\t  var x1 = xU - phiRatio * (xU - xL);\n\t  var x2 = xL + phiRatio * (xU - xL);\n\t  // Initial bounds:\n\t  var f1 = f(x1);\n\t  var f2 = f(x2);\n\t\n\t  // Store these values so that we can return these if they're better.\n\t  // This happens when the minimization falls *approaches* but never\n\t  // actually reaches one of the bounds\n\t  var f1_0 = f(xL);\n\t  var f2_0 = f(xU);\n\t  var xL_0 = xL;\n\t  var xU_0 = xU;\n\t\n\t  // Simple, robust golden section minimization:\n\t  while (++n < maxIter && Math.abs(xU - xL) > tol) {\n\t    if (f2 > f1) {\n\t      xU = x2;\n\t      x2 = x1;\n\t      f2 = f1;\n\t      x1 = xU - phiRatio * (xU - xL);\n\t      f1 = f(x1);\n\t    } else {\n\t      xL = x1;\n\t      x1 = x2;\n\t      f1 = f2;\n\t      x2 = xL + phiRatio * (xU - xL);\n\t      f2 = f(x2);\n\t    }\n\t  }\n\t\n\t  if (n === maxIter || isNaN(f2) || isNaN(f1)) {\n\t    return NaN;\n\t  }\n\t\n\t  xF = 0.5 * (xU + xL);\n\t  fF = 0.5 * (f1 + f2);\n\t\n\t  if (f1_0 < fF) {\n\t    return xL_0;\n\t  } else if (f2_0 < fF) {\n\t    return xU_0;\n\t  } else {\n\t    return xF;\n\t  }\n\t}\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\t'use strict'\n\t\n\t/**\n\t * The fourth order Runge-Kutta integration method\n\t *\n\t * @class RungeKutta4\n\t * @param {Function} derives Differential equations which needed to integrate\n\t * @param {Number}   xStart  Initial value problem: x0\n\t * @param {Array}    yStart  Initial value problem: y0\n\t * @param {Number}   h       Each step-size value\n\t */\n\tvar RungeKutta4 = function(derives, xStart, yStart, h) {\n\t    this.derives    = derives\n\t    this.x          = xStart\n\t    this.y          = yStart || []\n\t    this.dimension  = this.y.length\n\t    this.h          = h || 0.01\n\t\n\t    // cache the k1, k2, k3, k4 of each step\n\t    this._k1\n\t    this._k2\n\t    this._k3\n\t    this._k4\n\t}\n\t\n\tRungeKutta4.prototype = {\n\t    /**\n\t     * Calculate each step according to step-size h\n\t     *\n\t     * @return {Array} calculated result at this.x\n\t     */\n\t    step: function() {\n\t        var derives     = this.derives,\n\t            x           = this.x,\n\t            dimension   = this.dimension,\n\t            h           = this.h\n\t\n\t        var i, _y = []\n\t\n\t        // Alias: f() <=> this.derives()\n\t        //        Xn  <=> this.x\n\t        //        Yn  <=> this.y\n\t        //        H   <=> this.h\n\t        //        K1  <=> this._k1\n\t\n\t        // calculate _k1: K1 = f(Xn, Yn)\n\t        this._k1 = derives(x, this.y)\n\t\n\t        // calculate _k2: K2 = f(Xn + 0.5 * H, Yn + 0.5 * H * K1)\n\t        for (i = 0; i < dimension; i++) {\n\t            _y[i] = this.y[i] + h * 0.5 * this._k1[i]\n\t        }\n\t        this._k2 = derives(x + h * 0.5, _y)\n\t\n\t        // calculate _k3: K3 = f(Xn + 0.5 * H, Yn + 0.5 * H * K2)\n\t        for (i = 0; i < dimension; i++) {\n\t            _y[i] = this.y[i] + h * 0.5 * this._k2[i]\n\t        }\n\t        this._k3 = derives(x + h * 0.5, _y)\n\t\n\t        // calculate _k4: K4 = f(Xn + H, Yn + H * K3)\n\t        for (i = 0; i < dimension; i++) {\n\t            _y[i] = this.y[i] + h * this._k3[i]\n\t        }\n\t        this._k4 = derives(x + h, _y)\n\t\n\t        // calculate yNext: Y(n + 1) = Yn + H / 6 * (K1 + 2 * K2 + 2 * K3 + K4)\n\t        for (i = 0; i < dimension; i++) {\n\t            this.y[i] += h / 6 * (this._k1[i] + 2 * this._k2[i] + 2 * this._k3[i] + this._k4[i])\n\t        }\n\t\n\t        // calculate xNext: X(n + 1) = Xn + H\n\t        this.x += h\n\t\n\t        return this.y\n\t    },\n\t\n\t    /**\n\t     * Calculate according step times\n\t     *\n\t     * @param  {Number} steps Iterative times\n\t     * @return {Array}        Calculated result at this.x\n\t     */\n\t    steps: function(steps) {\n\t        for (var i = 0; i < steps; i++) {\n\t            this.step()\n\t        }\n\t\n\t        return this.y\n\t    },\n\t\n\t    /**\n\t     * Calculate according to xEnd\n\t     *\n\t     * @param  {Number} xEnd final x\n\t     * @return {Array}       Calculated result at xEnd\n\t     */\n\t    end: function(xEnd) {\n\t        var steps = (xEnd - this.x) / this.h\n\t        return this.steps(steps)\n\t    }\n\t\n\t}\n\t\n\tmodule.exports = RungeKutta4\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** 753d4aa7084453c94f7c.worker.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 753d4aa7084453c94f7c\n **/","import { LumpedModel } from './LumpedModel.js'\r\nimport BFGS from 'bfgs-algorithm'\r\n\r\nlet lumpedModels = []\r\nlet bfgs = null\r\nlet termination = 0\r\nlet iterator = 0\r\n\r\nonmessage = (message) => {\r\n    // 传递过来的data类型，应该包含\r\n    // {\r\n    //     type: 'start' || 'step', 操作的类型\r\n    //     guess: [],               猜想值\r\n    //     target: [],              目标集总对象的数量\r\n    //     termination: 2           目标函数期望值\r\n    // }\r\n    const data = message.data\r\n\r\n    switch (data.type) {\r\n        case 'start':\r\n            start(data)\r\n            break\r\n        case 'step':\r\n            step()\r\n            break\r\n        default:\r\n            break\r\n    }\r\n}\r\n\r\nconst start = (data) => {\r\n    // 重置\r\n    lumpedModels = []\r\n    bfgs = null\r\n    iterator = 0\r\n    termination = data.termination\r\n\r\n    let guess = data.guess\r\n    let target = data.target\r\n\r\n    let lm = null\r\n    for (let i = 0, len = target.length; i < len; i++) {\r\n        lm = new LumpedModel(target[i].yStart, target[i].yActual, target[i].operatingParams, target[i].option)\r\n        lumpedModels.push(lm)\r\n    }\r\n\r\n    let objectiveFn = (x) => {\r\n        let objectiveValue = 0\r\n\r\n        let i, len = lumpedModels.length\r\n        for (let i = 0, len = target.length; i < len; i++) {\r\n            objectiveValue += lumpedModels[i].objectiveFn(x)\r\n        }\r\n\r\n        return objectiveValue\r\n    }\r\n\r\n    bfgs = new BFGS(objectiveFn, guess)\r\n\r\n    postMessage({\r\n        type: 'start',\r\n        msg: ' ------ 拟合开始 ------ \\r\\n'\r\n    })\r\n}\r\n\r\nconst step = () => {\r\n    bfgs.step()\r\n\r\n    postMessage({\r\n        type: 'calculating',\r\n        msg: `第${++iterator}次 => 目标函数值：${bfgs.fMin} \\r\\n`\r\n    })\r\n\r\n    detect()\r\n}\r\n\r\nconst detect = () => {\r\n    if (bfgs.fMin < termination) {\r\n        let result = {\r\n            params: [], // 只有一组，因为每一个集总对象的params都是一样的\r\n            yCalcu: [], // yCalcu与k一样是根据计算的集总对象的数量确定的\r\n            k: []\r\n        }\r\n\r\n        result.params = lumpedModels.length > 0 ? lumpedModels[0] : []\r\n\r\n        for (let i = 0, len = lumpedModels.length; i < len; i++) {\r\n            result.yCalcu.push(lumpedModels[i].getProduct())\r\n            result.k.push(lumpedModels[i].k)\r\n        }\r\n\r\n        postMessage({\r\n            type: 'end',\r\n            msg: ' ------ 拟合完成 ------ \\r\\n',\r\n            result: result\r\n        })\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/calculating.js\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_descriptors.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-object.js\n ** module id = 2\n ** module chunks = 0\n **/","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_core.js\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_fails.js\n ** module id = 4\n ** module chunks = 0\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_global.js\n ** module id = 5\n ** module chunks = 0\n **/","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-dp.js\n ** module id = 6\n ** module chunks = 0\n **/","import RungeKutta from 'runge-kutta-4'\r\n\r\nclass LumpedModel {\r\n    constructor(yStart, yActual, operatingParams, options) {\r\n        operatingParams = operatingParams || {}\r\n        options = options || {}\r\n\r\n        // 是否使用 拟合速率参数 的方法，默认为false\r\n        this.isFittingK = !!options.isFittingK\r\n\r\n        // 进料组成\r\n        this.yStart = yStart\r\n        // 实际产物比例\r\n        this.yActual = yActual\r\n        // 温度\r\n        this.temperature = operatingParams.temperature\r\n        // 压力\r\n        this.pressure = operatingParams.pressure\r\n        // 停留时间\r\n        this.residenceTime = operatingParams.residenceTime\r\n        // 碱氮含量\r\n        this.NPercent = operatingParams.NPercent\r\n        // 剂油比\r\n        this.catalystOilRatio = operatingParams.catalystOilRatio\r\n\r\n        this.params = []\r\n\r\n        this.k = []\r\n    }\r\n\r\n    derives(x, y) {\r\n        var self = this\r\n        var params = self.params\r\n\r\n        var len = params.length - 3\r\n\r\n        var dydx = []\r\n\r\n        // 各组分摩尔质量\r\n        var M = []\r\n        // 反应速率常数\r\n        var k = []\r\n        // 活化能\r\n        var E = []\r\n        // 指前因子\r\n        var A = []\r\n        // 失活因子\r\n        var inactivationFactor = params.slice(len)\r\n\r\n        if (self.isFittingK) {\r\n            k = params.slice(0, len)\r\n        } else {\r\n            A = params.slice(0, len / 2)\r\n            E = params.slice(len / 2, len)\r\n            k = calculateArrhenius(A, E, self.temperature)\r\n        }\r\n\r\n        self.k = k\r\n\r\n        // 饱和分HS\r\n        dydx[0] = -(k[0] + k[1] + k[2] + k[3] + k[4] + k[5] + k[6] + k[7] + k[8]) * y[0]\r\n        // 芳香分HA\r\n        dydx[1] = -(k[9] + k[10] + k[11] + k[12] + k[13] + k[14] + k[15] + k[16] + k[17]) * y[1]\r\n        // 胶质沥青质HR\r\n        dydx[2] = -(k[18] + k[19] + k[20] + k[21] + k[22] + k[23] + k[24] + k[25] + k[26]) * y[2]\r\n        // 柴油Diesel\r\n        dydx[3] = k[0] * y[0]+ k[9] * y[1]+ k[18] * y[2] - (k[27] + k[28] + k[29] + k[30] + k[31] + k[32] + k[33] + k[34]) * y[3]\r\n        // 汽油饱和烃GS\r\n        dydx[4] = k[1] * y[0] + k[10] * y[1] + k[19] * y[2] + k[27] * y[3] + k[42] * y[5] - (k[35] + k[36] + k[37] + k[38] + k[39] + k[40] + k[41]) * y[4]\r\n        // 汽油烯烃GO\r\n        dydx[5] = k[2] * y[0] + k[11] * y[1] + k[20] * y[2] + k[28] * y[3] + k[35] * y[4] - (k[42] + k[43] + k[44] + k[45] + k[46] + k[47] + k[48]) * y[5]\r\n        // 汽油芳烃GA\r\n        dydx[6] = k[3] * y[0] + k[12] * y[1] + k[21] * y[2] + k[29] * y[3] + k[36] * y[4] + k[43] * y[5] - (k[49] + k[50] + k[51] + k[52] + k[53]) * y[6]\r\n        // 干气DGas\r\n        dydx[7] = k[4] * y[0] + k[13] * y[1] + k[22] * y[2] + k[30] * y[3] + k[37] * y[4] + k[44] * y[5] + k[49] * y[6]\r\n        // 丙烯LO3\r\n        dydx[8] = k[5] * y[0] + k[14] * y[1] + k[23] * y[2] + k[31] * y[3] + k[38] * y[4] + k[45] * y[5] + k[50] * y[6]\r\n        // 丁烯LO4\r\n        dydx[9] = k[6] * y[0] + k[15] * y[1] + k[24] * y[2] + k[32] * y[3] + k[39] * y[4] + k[46] * y[5] + k[51] * y[6]\r\n        // 液化气LPGD\r\n        dydx[10] = k[7] * y[0] + k[16] * y[1] + k[25] * y[2] + k[33] * y[3] + k[40] * y[4] + k[47] * y[5] + k[52] * y[6]\r\n        // 焦炭Coke\r\n        dydx[11] = k[8] * y[0] + k[17] * y[1] + k[26] * y[2] + k[34] * y[3] + k[41] * y[4] + k[48] * y[5] + k[53] * y[6]\r\n\r\n        var funcA = 1 / (1 + inactivationFactor[0] * y[1] / 100)\r\n        var funcC = Math.exp(-inactivationFactor[1] * self.residenceTime)\r\n        var funcN = 1 / (1 + inactivationFactor[2] * self.NPercent / self.catalystOilRatio)\r\n\r\n        // 空速， 单位： s-1\r\n        var speed = 1 / (self.residenceTime * self.catalystOilRatio)\r\n\r\n        // 摩尔质量, 单位: kg/mol\r\n        var molecularWeights = 1 / (y[0] / 0.430 + y[1] / 0.430 + y[2] / 0.430 + y[3] / 0.200\r\n                + y[4] / 0.100 + y[5] / 0.100 + y[6] / 0.100\r\n                + y[7] / 0.040 + y[8] / 0.040 + y[9] / 0.040 + y[10] / 0.040 + y[11] / 0.018)\r\n\r\n        for (var i = 0; i < dydx.length; i++) {\r\n            dydx[i] = funcA * funcC * funcN * dydx[i] * molecularWeights * self.pressure / (UNIVERSAL_GAS_CONSTANT * self.temperature * speed)\r\n        }\r\n\r\n        return dydx\r\n    }\r\n\r\n    /**\r\n     * 目标函数：f = Σ(y计算值 - y实际值)2\r\n     * @return {number} 目标优化函数值\r\n     */\r\n    objectiveFn(x) {\r\n        var self = this\r\n\r\n        for (var i = 0, len = x.length; i < len; i++) {\r\n            self.params[i] = Math.abs(x[i])\r\n        }\r\n\r\n        var yActual = self.yActual\r\n\r\n        var yCalcul = self.getProduct()\r\n\r\n        var i, len = yActual.length, objectiveValue = 0\r\n        for (i = 0; i < len; i++) {\r\n            objectiveValue += (yActual[i] - yCalcul[i]) * (yActual[i] - yCalcul[i])\r\n        }\r\n\r\n        // console.log(yCalcul, objectiveValue)\r\n\r\n        return objectiveValue\r\n    }\r\n\r\n    getProduct() {\r\n        var self = this\r\n\r\n        var yStart = []\r\n        for (var i = 0, len = self.yStart.length; i < len; i++) {\r\n            yStart[i] = self.yStart[i]\r\n        }\r\n\r\n        // 绑定this\r\n        var derives = function(x, y) {\r\n            return self.derives(x, y)\r\n        }\r\n\r\n        var rk = new RungeKutta(derives, 0, yStart, 0.01)\r\n\r\n        for (var i = 0; i < 100; i++) {\r\n            rk.step()\r\n        }\r\n\r\n        return rk.y\r\n    }\r\n}\r\n\r\n/**\r\n * 根据阿伦尼乌斯方程计算温度为T的反应速率常数\r\n * @param  {array}   A   指前因子(单位：s-1)\r\n * @param  {array}   E   活化能(单位：kJ/mol)\r\n * @param  {number}  T   温度(单位：K)\r\n * @return {array}       温度T下的反应速率常数\r\n */\r\nfunction calculateArrhenius(A, E, T) {\r\n    var k0, k = [];\r\n\r\n    if (A.length !== E.length) throw 'A isn\\'t match E';\r\n\r\n    var i, len = A.length;\r\n    for (i = 0; i < len; i++) {\r\n        k0 = A[i] * Math.exp(-E[i] * 1000 / (UNIVERSAL_GAS_CONSTANT * T));\r\n        k.push(k0);\r\n    }\r\n\r\n    return k;\r\n}\r\n\r\nfunction calculateAE(o1, o2) {\r\n    var T1 = o1.T,\r\n        T2 = o2.T,\r\n        k1 = o1.k,\r\n        k2 = o2.k\r\n\r\n    var A = [], E = []\r\n\r\n    var i, len = k1.length\r\n    for (i = 0; i < len; i++) {\r\n        E[i] = UNIVERSAL_GAS_CONSTANT * (Math.log(k2[i] / k1[i])) / (1 / T1 - 1 / T2)\r\n    }\r\n\r\n    for (i = 0; i < len; i++) {\r\n        A[i] = k1[i] / (Math.exp(- E[i] / UNIVERSAL_GAS_CONSTANT / T1))\r\n    }\r\n\r\n    return {\r\n        A: A,\r\n        E: E\r\n    }\r\n}\r\n\r\nfunction setLumps(lumps) {\r\n    var result = []\r\n    for (var i = 0, len = lumps.length; i < len; i++) {\r\n        result.push({\r\n            name: lumps[i],\r\n            key: i,\r\n            value: ''\r\n        })\r\n    }\r\n    return result\r\n}\r\n\r\n\r\n// 气体常量, 单位：m3 * Pa * K-1 * mol-1\r\nconst UNIVERSAL_GAS_CONSTANT = 8.3144598;\r\n// 十二集总划分\r\nconst LUMPS = ['HS', 'HA', 'HR', 'DIESEL', 'GS', 'GO', 'GA', 'DGAS', 'LO3', 'LO4', 'LPGD', 'COKE']\r\n// 反应常数矩阵 \r\nconst ACTIVE_LUMPS = [\r\n    [false, false, false, false, false, false, false, false, false, false, false, false],\r\n    [false, false, false, false, false, false, false, false, false, false, false, false],\r\n    [false, false, false, false, false, false, false, false, false, false, false, false],\r\n    [true, true, true, false, false, false, false, false, false, false, false, false],\r\n    [true, true, true, true, false, true, false, false, false, false, false, false],\r\n    [true, true, true, true, true, false, false, false, false, false, false, false],\r\n    [true, true, true, true, true, true, false, false, false, false, false, false],\r\n    [true, true, true, true, true, true, true, false, false, false, false, false],\r\n    [true, true, true, true, true, true, true, false, false, false, false, false],\r\n    [true, true, true, true, true, true, true, false, false, false, false, false],\r\n    [true, true, true, true, true, true, true, false, false, false, false, false],\r\n    [true, true, true, true, true, true, true, false, false, false, false, false]\r\n]\r\n\r\nclass InitCondition {\r\n    constructor() {\r\n        this.operational = [\r\n            { name: '操作温度(K)', key: 'temperature', value: '' },\r\n            { name: '操作压力(Pa)', key: 'pressure', value: '' },\r\n            { name: '剂油比', key: 'catalystOilRatio', value: '' },\r\n            { name: '停留时间(s)', key: 'residenceTime', value: '' },\r\n            { name: '碱氮含量', key: 'NPercent', value: '' }\r\n        ]\r\n        this.feed = [\r\n            { name: 'HS', key: 0, value: '' },\r\n            { name: 'HA', key: 1, value: '' },\r\n            { name: 'HR', key: 2, value: '' }\r\n        ]\r\n        this.product = setLumps(LUMPS)\r\n    }\r\n}\r\n\r\nexport {\r\n    LumpedModel,\r\n    calculateArrhenius,\r\n    calculateAE,\r\n    InitCondition,\r\n    UNIVERSAL_GAS_CONSTANT,\r\n    LUMPS,\r\n    ACTIVE_LUMPS\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/LumpedModel.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-property.js\n ** module id = 8\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/classCallCheck.js\n ** module id = 9\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/createClass.js\n ** module id = 10\n ** module chunks = 0\n **/","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/define-property.js\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_a-function.js\n ** module id = 12\n ** module chunks = 0\n **/","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_an-object.js\n ** module id = 13\n ** module chunks = 0\n **/","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_ctx.js\n ** module id = 14\n ** module chunks = 0\n **/","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_dom-create.js\n ** module id = 15\n ** module chunks = 0\n **/","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_export.js\n ** module id = 16\n ** module chunks = 0\n **/","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_hide.js\n ** module id = 17\n ** module chunks = 0\n **/","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js\n ** module id = 18\n ** module chunks = 0\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_property-desc.js\n ** module id = 19\n ** module chunks = 0\n **/","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-primitive.js\n ** module id = 20\n ** module chunks = 0\n **/","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.define-property.js\n ** module id = 21\n ** module chunks = 0\n **/","'use strict'\n\nvar minimize = require('minimize-golden-section-1d')\n\nvar MathUtils = require('./MathUtils.js')\n\n/**\n * [BFGSAlgorithm description]\n */\nvar BFGSAlgorithm = function(f, x0, options) {\n    options = options || {}\n\n    this.f = f\n    this.n = x0.length\n    // cache the init guess\n    this.xInitGuess = x0\n    this.x = MathUtils.clone(x0)\n\n    this.df = options.df || MathUtils.getApproximateGradientFunction(this.f)\n    this.maxIterator = options.maxIterator || 200\n    this.err = options.err || 1E-6\n\n    // the gradient of the function evaluated at x[k]: g[k]  (x[0] = x0)\n    this.g = this.df(this.x)\n\n    // the inverse of approximate Hessian matrix: B[k]  (B[0] = I)\n    this.B = MathUtils.getIdentityMatrix(this.n)\n\n    // direction: p[k]\n    this.p = []\n\n    this.stepsize = 0\n    this.fMin = Infinity\n    this.convergence = Infinity\n    this.isConverges = false\n\n    this.iterator = -1\n}\n\nBFGSAlgorithm.prototype = {\n    step: function() {\n        var self = this\n        var dimension = self.n\n        var i, j\n\n        ////////////////////////////////////////////////////////////////\n        // 0. Convergence is checked by observing the norm of the gradient\n        // \n        var convergence = 0\n        for (i = 0; i < dimension; i++) {\n            convergence += self.g[i] * self.g[i]\n        }\n        self.convergence = Math.sqrt(convergence)\n\n        if (isNaN(self.convergence)) {\n            throw 'the norm of the gradient was unconverged'\n        }\n\n        if (self.convergence < self.err) {\n            self.isConverges = true\n            return self\n        }\n\n        self.iterator++\n        ////////////////////////////////////////////////////////////////\n        // 1. obtain a direction pk by solving: P[k] = - B[k] * ▽f(x[k])\n        // 搜索方向 done: p \n        for (i = 0; i < dimension; i++) {\n            self.p[i] = 0\n            for (j = 0; j < dimension; j++) {\n                self.p[i] += -self.B[i][j] * self.g[j]\n            }\n        }\n\n        ////////////////////////////////////////////////////////////////\n        // 2. lineSearch: min f(x + lamda * p)\n        // 搜索步长 done: stepsize\n        var fNext = function(lamda) {\n            var xNext = []\n            for (i = 0; i < dimension; i++) {\n                xNext[i] = self.x[i] + lamda * self.p[i]\n            }\n            return self.f(xNext)\n        }\n\n        self.stepsize = minimize(fNext, { guess: 0 })\n\n        if (isNaN(self.stepsize)) {\n            throw 'can\\'t find approximate stepsize'\n        }\n        \n        self.fMin = fNext(self.stepsize)\n        ////////////////////////////////////////////////////////////////\n        // 3. update: x[k + 1] = x[k] + stepsize * p[k],  s[k] = stepsize * p[k]\n        // 求取heessian矩阵中间值 s done: s = stepsize * p\n        // 下一次迭代点 done: s = stepsize * p\n        var s = []\n        for (i = 0; i < dimension; i++) {\n            s[i] = self.stepsize * self.p[i]\n            self.x[i] += s[i]\n        }\n\n        ////////////////////////////////////////////////////////////////\n        // 4. next gradient: ▽f(x[k + 1]), y[k] = g[k + 1] - g[k]\n        // 求取hessian矩阵中间值 y done: y = df(x[k + 1]) - df(x[k])\n        var _g = self.df(self.x)\n        var y = []\n        for (i = 0; i < dimension; i++) {\n            y[i] = _g[i] - self.g[i]\n        }\n        self.g = _g\n\n        ////////////////////////////////////////////////////////////////\n        // 5. approximate hessian matrix\n        // (T) => transposition\n        \n        // 5.1 let _scalarA = s(T) * y\n        var _scalarA = 0\n        for (i = 0; i < dimension; i++) {\n            _scalarA += s[i] * y[i]\n        }\n\n        // 5.2 let _vectorB = B * y\n        var _vectorB = []\n        for (i = 0; i < dimension; i++) {\n            _vectorB[i] = 0\n            for (j = 0; j < dimension; j++) {\n                _vectorB[i] += self.B[i][j] * y[j]\n            }\n        }\n\n        // 5.3 let _scalarC = (s(T) * y + y(T) * B * y) / (s(T) * y)2\n        //                  = (_scalarA + y(T) * _vectorB) / (_scalarA * _scalarA)\n        var _scalarC = 0\n        for (i = 0; i < dimension; i++) {\n            _scalarC += y[i] * _vectorB[i]\n        }\n        _scalarC = (_scalarA + _scalarC) / (_scalarA * _scalarA)\n\n        for (i = 0; i < dimension; i++) {\n            for (j = 0; j < dimension; j++) {\n                self.B[i][j] += _scalarC * s[i] * s[j] - (_vectorB[i] * s[j] + s[i] * _vectorB[j]) / _scalarA\n            }\n        }\n\n        return self\n    },\n\n    run: function() {\n        while (true) {\n            if (this.isConverges) {\n                return this\n            }\n\n            if (this.iterator > this.maxIterator) {\n                throw 'Too much iterators'\n            }\n\n            this.step()\n        }\n    }\n}\n\nmodule.exports = BFGSAlgorithm\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bfgs-algorithm/lib/BFGSAlgorithm.js\n ** module id = 22\n ** module chunks = 0\n **/","'use strict'\n\nvar MathUtils = {\n    getApproximateGradientFunction: function(f) {\n        return function(x) {\n            var deltaX = 1E-10\n            var deltaY\n            var xNew = [], dy = []\n\n            var i, j, n = x.length\n            for (i = 0; i < n; i++) {\n                for (j = 0; j < n; j++) {\n                    xNew[j] = (i === j) ? (x[j] + deltaX) : x[j]\n                }\n\n                deltaY = f(xNew) - f(x)\n\n                dy[i] = deltaY / deltaX\n            }\n\n            return dy\n        }\n    },\n\n    /**\n     * generate Identity Matrix\n     * @param  {Number} size the size of identity matrix\n     * @return {Array}  Identity Matrix \n     */\n    getIdentityMatrix: function(size) {\n        var i, j\n        var matrix = []\n\n        for (i = 0; i < size; i++) {\n            matrix[i] = []\n            for (j = 0; j < size; j++) {\n                matrix[i][j] = 0\n            }\n            matrix[i][i] = 1\n        }\n\n        return matrix\n    },\n\n    clone: function(array) {\n        var res = []\n        var i, len = array.length\n\n        for (i = 0; i < len; i++) {\n            res.push(array[i])\n        }\n\n        return res\n    }\n}\n\nmodule.exports = MathUtils\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bfgs-algorithm/lib/MathUtils.js\n ** module id = 23\n ** module chunks = 0\n **/","'use strict';\n\nvar goldenSectionMinimize = require('./src/golden-section-minimize');\nvar bracketMinimum = require('./src/bracket-minimum');\n\nmodule.exports = function minimize (f, options) {\n  options = options || {};\n  var x0, bounds;\n  var tolerance = options.tolerance === undefined ? 1e-8 : options.tolerance;\n  var dx = options.initialIncrement === undefined ? 1 : options.initialIncrement;\n  var xMin = options.lowerBound === undefined ? -Infinity : options.lowerBound;\n  var xMax = options.upperBound === undefined ? Infinity : options.upperBound;\n  var maxIter = options.maxIter === undefined ? 100 : options.maxIter;\n\n  if (isFinite(xMax) && isFinite(xMin)) {\n    bounds = [xMin, xMax];\n  } else {\n    // Construct the best guess we can:\n    if (options.guess === undefined) {\n      if (xMin > -Infinity) {\n        x0 = xMax < Infinity ? 0.5 * (xMin + xMax) : xMin;\n      } else {\n        x0 = xMax < Infinity ? xMax : 0;\n      }\n    } else {\n      x0 = options.guess;\n    }\n\n    bounds = bracketMinimum(f, x0, dx, xMin, xMax, maxIter);\n\n    if (isNaN(bounds[0]) || isNaN(bounds[1])) {\n      return NaN;\n    }\n  }\n\n  return goldenSectionMinimize(f, bounds[0], bounds[1], tolerance, maxIter);\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bfgs-algorithm/~/minimize-golden-section-1d/index.js\n ** module id = 24\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = bracketMinimum;\n\nfunction bracketMinimum (f, x0, dx, xMin, xMax, maxIter) {\n  // If either size is unbounded (=infinite), Expand the guess\n  // range until we either bracket a minimum or until we reach the bounds:\n  var fU, fL, fMin, n, xL, xU, bounded;\n  n = 0;\n  xL = x0;\n  xU = x0;\n  fMin = fL = fU = f(x0);\n  while (!bounded && ++n < maxIter) {\n    bounded = true;\n    // Increase the increment:\n    dx *= 2;\n    if (fL <= fMin) {\n      fMin = fL;\n      xL = Math.max(xMin, xL - dx);\n      fL = f(xL);\n      bounded = false;\n    }\n    if (fU <= fMin) {\n      fMin = fU;\n      xU = Math.min(xMax, xU + dx);\n      fU = f(xU);\n      bounded = false;\n    }\n\n    // Track the smallest value seen so far:\n    fMin = Math.min(fMin, fL, fU);\n\n    // If either of these is the case, then the function appears\n    // to be minimized against one of the bounds, so although we\n    // haven't bracketed a minimum, we'll considere the procedure\n    // complete because we appear to have bracketed a minimum\n    // against a bound:\n    if ((fL === fMin && xL === xMin) || (fU === fMin && xU === xMax)) {\n      bounded = true;\n    }\n  }\n\n  if (n === maxIter) {\n    return [NaN, NaN];\n  } else {\n    return [xL, xU];\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bfgs-algorithm/~/minimize-golden-section-1d/src/bracket-minimum.js\n ** module id = 25\n ** module chunks = 0\n **/","'use strict';\n\nvar phiRatio = 2 / (1 + Math.sqrt(5));\n\nmodule.exports = goldenSectionMinimize;\n\nfunction goldenSectionMinimize (f, xL, xU, tol, maxIter) {\n  var xF, fF;\n  var n = 0;\n  var x1 = xU - phiRatio * (xU - xL);\n  var x2 = xL + phiRatio * (xU - xL);\n  // Initial bounds:\n  var f1 = f(x1);\n  var f2 = f(x2);\n\n  // Store these values so that we can return these if they're better.\n  // This happens when the minimization falls *approaches* but never\n  // actually reaches one of the bounds\n  var f1_0 = f(xL);\n  var f2_0 = f(xU);\n  var xL_0 = xL;\n  var xU_0 = xU;\n\n  // Simple, robust golden section minimization:\n  while (++n < maxIter && Math.abs(xU - xL) > tol) {\n    if (f2 > f1) {\n      xU = x2;\n      x2 = x1;\n      f2 = f1;\n      x1 = xU - phiRatio * (xU - xL);\n      f1 = f(x1);\n    } else {\n      xL = x1;\n      x1 = x2;\n      f1 = f2;\n      x2 = xL + phiRatio * (xU - xL);\n      f2 = f(x2);\n    }\n  }\n\n  if (n === maxIter || isNaN(f2) || isNaN(f1)) {\n    return NaN;\n  }\n\n  xF = 0.5 * (xU + xL);\n  fF = 0.5 * (f1 + f2);\n\n  if (f1_0 < fF) {\n    return xL_0;\n  } else if (f2_0 < fF) {\n    return xU_0;\n  } else {\n    return xF;\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bfgs-algorithm/~/minimize-golden-section-1d/src/golden-section-minimize.js\n ** module id = 26\n ** module chunks = 0\n **/","'use strict'\n\n/**\n * The fourth order Runge-Kutta integration method\n *\n * @class RungeKutta4\n * @param {Function} derives Differential equations which needed to integrate\n * @param {Number}   xStart  Initial value problem: x0\n * @param {Array}    yStart  Initial value problem: y0\n * @param {Number}   h       Each step-size value\n */\nvar RungeKutta4 = function(derives, xStart, yStart, h) {\n    this.derives    = derives\n    this.x          = xStart\n    this.y          = yStart || []\n    this.dimension  = this.y.length\n    this.h          = h || 0.01\n\n    // cache the k1, k2, k3, k4 of each step\n    this._k1\n    this._k2\n    this._k3\n    this._k4\n}\n\nRungeKutta4.prototype = {\n    /**\n     * Calculate each step according to step-size h\n     *\n     * @return {Array} calculated result at this.x\n     */\n    step: function() {\n        var derives     = this.derives,\n            x           = this.x,\n            dimension   = this.dimension,\n            h           = this.h\n\n        var i, _y = []\n\n        // Alias: f() <=> this.derives()\n        //        Xn  <=> this.x\n        //        Yn  <=> this.y\n        //        H   <=> this.h\n        //        K1  <=> this._k1\n\n        // calculate _k1: K1 = f(Xn, Yn)\n        this._k1 = derives(x, this.y)\n\n        // calculate _k2: K2 = f(Xn + 0.5 * H, Yn + 0.5 * H * K1)\n        for (i = 0; i < dimension; i++) {\n            _y[i] = this.y[i] + h * 0.5 * this._k1[i]\n        }\n        this._k2 = derives(x + h * 0.5, _y)\n\n        // calculate _k3: K3 = f(Xn + 0.5 * H, Yn + 0.5 * H * K2)\n        for (i = 0; i < dimension; i++) {\n            _y[i] = this.y[i] + h * 0.5 * this._k2[i]\n        }\n        this._k3 = derives(x + h * 0.5, _y)\n\n        // calculate _k4: K4 = f(Xn + H, Yn + H * K3)\n        for (i = 0; i < dimension; i++) {\n            _y[i] = this.y[i] + h * this._k3[i]\n        }\n        this._k4 = derives(x + h, _y)\n\n        // calculate yNext: Y(n + 1) = Yn + H / 6 * (K1 + 2 * K2 + 2 * K3 + K4)\n        for (i = 0; i < dimension; i++) {\n            this.y[i] += h / 6 * (this._k1[i] + 2 * this._k2[i] + 2 * this._k3[i] + this._k4[i])\n        }\n\n        // calculate xNext: X(n + 1) = Xn + H\n        this.x += h\n\n        return this.y\n    },\n\n    /**\n     * Calculate according step times\n     *\n     * @param  {Number} steps Iterative times\n     * @return {Array}        Calculated result at this.x\n     */\n    steps: function(steps) {\n        for (var i = 0; i < steps; i++) {\n            this.step()\n        }\n\n        return this.y\n    },\n\n    /**\n     * Calculate according to xEnd\n     *\n     * @param  {Number} xEnd final x\n     * @return {Array}       Calculated result at xEnd\n     */\n    end: function(xEnd) {\n        var steps = (xEnd - this.x) / this.h\n        return this.steps(steps)\n    }\n\n}\n\nmodule.exports = RungeKutta4\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/runge-kutta-4/lib/RungeKutta4.js\n ** module id = 27\n ** module chunks = 0\n **/"],"sourceRoot":""}